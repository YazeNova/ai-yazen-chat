<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat with AI Yazen</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; background-color: #0d1117; color: #c9d1d9; }
        .hero-bg { background: linear-gradient(-45deg, #0d1117, #161b22, #010409, #161b22); background-size: 400% 400%; animation: gradientBG 15s ease infinite; }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .glassmorphism { background: rgba(22, 27, 34, 0.6); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .gemini-loader { border: 4px solid #4B5563; border-top: 4px solid #F59E0B; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .avatar-container { position: relative; width: 160px; height: 160px; }
        .avatar-image { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }
        .mouth { position: absolute; width: 40px; height: 5px; background: #FFFFFF; border-radius: 50%; bottom: 38px; left: 50%; transform: translateX(-50%); transition: height 0.1s ease-in-out; }
        .mouth.talking { animation: talk 0.2s infinite alternate; }
        @keyframes talk { 0% { height: 1px; } 100% { height: 10px; } }
        #voice-toggle-label .dot { transition: transform 0.3s ease; }
        #voice-toggle:checked + #voice-toggle-label .dot { transform: translateX(1.5rem); }
        #voice-toggle:checked + #voice-toggle-label .block { background-color: #f59e0b; }
    </style>
</head>
<body class="antialiased">
    
    <button id="return-btn" class="fixed top-4 left-4 bg-gray-700 hover:bg-amber-500 text-white hover:text-gray-900 font-bold py-2 px-4 rounded-full z-50 transition">
        <i class="fa-solid fa-arrow-left"></i> Back
    </button>

    <header id="hero" class="hero-bg text-white text-center py-20 md:py-32">
        <div class="container mx-auto px-6">
            <h1 class="text-4xl md:text-6xl font-black tracking-tight"> Hello üëã</h1>
            <h2 class="text-2xl md:text-5xl font-bold text-amber-400 mt-2"> My name is Yazen. AI Yazen, with a license to connect üïµÔ∏è‚Äç‚ôÇÔ∏è </h2>
            <p class="mt-6 text-lg md:text-xl text-gray-300 max-w-3xl mx-auto">
                Global Comms Strategist üåê | AI Solutions Architect & Educator ü§ñ | Designer of the "Climbing the AI Ladder" Mastery Course Series ü™ú | Learning Manger üéì | Life Coach üß† | Designer üé® | Videographer üé• | Photographer üì∏ | Poet & Author ‚úçÔ∏è | and more ...
            </p>
            <a href="#chat" class="mt-10 inline-block bg-amber-500 hover:bg-amber-600 text-gray-900 font-bold py-3 px-8 rounded-full text-lg transition duration-300 transform hover:scale-105">
                üí¨ Start Chatting with Yazen
            </a>
        </div>
    </header>

    <section id="chat" class="py-20">
        <div class="container mx-auto px-6">
            <div class="glassmorphism rounded-2xl shadow-2xl p-6 md:p-8 lg:p-12">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <aside class="lg:col-span-1 flex flex-col items-center text-center">
                        <div class="avatar-container">
                            <img src="https://i.ibb.co/pjjnHy2W/face-swap-png1.png" alt="Yazen's Avatar" class="avatar-image border-4 border-amber-400" onerror="this.onerror=null;this.src='https://placehold.co/160x160/0d1117/c9d1d9?text=Avatar';">
                            <div id="mouth" class="mouth"></div>
                        </div>
                        <h3 class="text-2xl font-bold mt-4 text-white">Yazen Al-Saghiri</h3>
                        <p class="mt-2 text-gray-400">28 years of global experience bridging technology and humanity.</p>
                        <div class="w-full border-t border-gray-700 my-6"></div>
                        <p class="font-bold text-white mb-4">Ask me about:</p>
                        <div class="grid grid-cols-2 gap-3 w-full">
                            <button class="topic-btn bg-gray-700 hover:bg-amber-500 hover:text-gray-900 text-sm font-semibold p-2 rounded-lg transition">ü§ñ AI</button>
                            <button class="topic-btn bg-gray-700 hover:bg-amber-500 hover:text-gray-900 text-sm font-semibold p-2 rounded-lg transition">üéì Learning</button>
                            <button class="topic-btn bg-gray-700 hover:bg-amber-500 hover:text-gray-900 text-sm font-semibold p-2 rounded-lg transition">üß† Life</button>
                            <button class="topic-btn bg-gray-700 hover:bg-amber-500 hover:text-gray-900 text-sm font-semibold p-2 rounded-lg transition">üé® Creativity</button>
                        </div>
                        <div class="w-full border-t border-gray-700 my-6"></div>
                        <div class="flex items-center justify-between w-full">
                            <span class="font-bold text-white">Auto-Play Voice</span>
                            <div class="flex items-center">
                                <input type="checkbox" id="voice-toggle" class="sr-only">
                                <label for="voice-toggle" id="voice-toggle-label" class="flex items-center cursor-pointer">
                                    <div class="relative">
                                        <div class="block bg-gray-600 w-14 h-8 rounded-full"></div>
                                        <div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full"></div>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <!-- START OF NEWLY ADDED LINE -->
                        <p class="text-sm text-gray-500 mt-2">
                            **Unlock Yazen's Voice:** Only those who truly know Yazen possess the secret passcode.
                        </p>
                        <!-- END OF NEWLY ADDED LINE -->
                    </aside>
                    <div class="lg:col-span-2">
                        <div id="chat-window" class="bg-gray-900 rounded-xl h-96 p-4 flex flex-col">
                            <div id="chat-log" class="flex-grow space-y-4 overflow-y-auto pr-2">
                            </div>
                            <div id="gemini-thinking-persona" class="flex items-center gap-3 my-2" style="display: none;">
                                <i class="fa-solid fa-robot text-amber-400 text-xl pt-1"></i>
                                <div class="gemini-loader"></div>
                            </div>
                        </div>
                        <div class="mt-4 flex gap-3">
                            <input type="text" id="user-question" class="flex-grow bg-gray-800 border border-gray-700 text-white rounded-lg p-3 focus:ring-2 focus:ring-amber-500 focus:outline-none" placeholder="Type your message here...">
                            <button id="ask-gemini-btn" class="bg-amber-500 hover:bg-amber-600 text-gray-900 font-bold py-3 px-5 rounded-lg transition"><i class="fa-solid fa-paper-plane"></i></button>
                            <button id="stop-speech-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-5 rounded-lg transition" style="display: none;"><i class="fa-solid fa-stop"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="courses" class="py-20">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-3xl md:text-4xl font-bold text-white">Climbing the AI Ladder ü™ú</h2>
            <p class="mt-4 text-lg text-gray-400 max-w-2xl mx-auto">A 5-module mastery series designed to take you from AI novice to proficient creator and strategist.</p>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-8 mt-12">
                <div class="glassmorphism p-6 rounded-xl text-left transform hover:-translate-y-2 transition-transform duration-300"><div class="bg-gray-800 h-32 rounded-lg mb-4 flex items-center justify-center"><i class="fa-solid fa-book-open text-4xl text-amber-400"></i></div><h3 class="font-bold text-white">Level 1: AI Literacy</h3><p class="text-sm text-gray-400 mt-2">An overview of AI history, types, risks, and opportunities.</p></div>
                <div class="glassmorphism p-6 rounded-xl text-left transform hover:-translate-y-2 transition-transform duration-300"><div class="bg-gray-800 h-32 rounded-lg mb-4 flex items-center justify-center"><i class="fa-solid fa-lightbulb text-4xl text-amber-400"></i></div><h3 class="font-bold text-white">Level 2: Smart Prompts</h3><p class="text-sm text-gray-400 mt-2">Mastering the art of speaking the language of AI.</p></div>
                <div class="glassmorphism p-6 rounded-xl text-left transform hover:-translate-y-2 transition-transform duration-300"><div class="bg-gray-800 h-32 rounded-lg mb-4 flex items-center justify-center"><i class="fa-solid fa-gears text-4xl text-amber-400"></i></div><h3 class="font-bold text-white">Level 3: AI Octopus</h3><p class="text-sm text-gray-400 mt-2">Juggling multiple skills and tasks with one smart mind.</p></div>
                <div class="glassmorphism p-6 rounded-xl text-left transform hover:-translate-y-2 transition-transform duration-300"><div class="bg-gray-800 h-32 rounded-lg mb-4 flex items-center justify-center"><i class="fa-solid fa-plane-up text-4xl text-amber-400"></i></div><h3 class="font-bold text-white">Level 4: Your AI Co-Pilot</h3><p class="text-sm text-gray-400 mt-2">Enhancing everyday tasks with a personal AI assistant.</p></div>
                <div class="glassmorphism p-6 rounded-xl text-left transform hover:-translate-y-2 transition-transform duration-300"><div class="bg-gray-800 h-32 rounded-lg mb-4 flex items-center justify-center"><i class="fa-solid fa-rocket text-4xl text-amber-400"></i></div><h3 class="font-bold text-white">Level 5: AI in Action</h3><p class="text-sm text-gray-400 mt-2">A hands-on workshop to apply and solidify your AI skills.</p></div>
            </div>
        </div>
    </section>

    <footer class="bg-black py-8">
        <div class="container mx-auto px-6 text-center text-gray-500">
            <p>&copy; 2025 Yazen M. Al-Saghiri. All Rights Reserved.</p>
            <p class="mt-4 text-xs max-w-3xl mx-auto">
                <strong>Disclaimer: AI Persona Responses</strong><br>
                All responses provided by this AI persona shall be intended solely for informational and entertainment purposes. The AI's responses shall not be considered, under any circumstances, my personal viewpoints, official statements, advice, or endorsements. Furthermore, these views shall not be considered views, positions, or policies of my employer. Users shall be utilizing this AI or its content at their own responsibility and risk. It is imperative that all answers provided by this AI are verified and double-checked. I shall not be held responsible or liable for any consequences arising from the use of this AI or its content. Use of this AI shall be deemed as your unconditional agreement to and acceptance of these terms.
            </p>
            <p class="mt-4 text-xs">Built with üí° & ü§ñ</p>
        </div>
    </footer>

    <!-- Passcode Modal -->
    <div id="passcode-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="glassmorphism p-8 rounded-xl shadow-lg w-full max-w-sm text-center">
            <h3 class="text-2xl font-bold text-white mb-4">Enter Passcode to Enable Voice</h3>
            <input type="password" id="passcode-input" class="w-full p-3 rounded-lg bg-gray-800 border border-gray-700 text-white mb-4 focus:ring-2 focus:ring-amber-500 focus:outline-none" placeholder="Enter passcode">
            <p id="passcode-message" class="text-red-400 mb-4"></p>
            <button id="passcode-submit-btn" class="bg-amber-500 hover:bg-amber-600 text-gray-900 font-bold py-3 px-6 rounded-lg transition w-full">Submit</button>
            <button id="passcode-cancel-btn" class="mt-3 bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition w-full">Cancel</button>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        const CONFIG = {
            ELEVENLABS_VOICE_ID_EN: "wZQEjO54Gya3z5Ts9V00",
            ELEVENLABS_VOICE_ID_AR: "GHBqETmNwnWVV2KJWAS0"
        };
        
        let isPasscodeVerified = false; // Tracks if the passcode has been successfully entered
        let isVoiceEnabled = false; // Tracks the state of the voice toggle switch

        const userQuestionInput = document.getElementById('user-question');
        const askButton = document.getElementById('ask-gemini-btn');
        const stopSpeechBtn = document.getElementById('stop-speech-btn');
        const returnBtn = document.getElementById('return-btn');
        const chatLog = document.getElementById('chat-log');
        const thinkingIndicator = document.getElementById('gemini-thinking-persona');
        const mouth = document.getElementById('mouth');
        const voiceToggle = document.getElementById('voice-toggle');

        // Passcode modal elements
        const passcodeModal = document.getElementById('passcode-modal');
        const passcodeInput = document.getElementById('passcode-input');
        const passcodeMessage = document.getElementById('passcode-message');
        const passcodeSubmitBtn = document.getElementById('passcode-submit-btn');
        const passcodeCancelBtn = document.getElementById('passcode-cancel-btn');

        let currentAudio = null; // Holds the currently playing audio object
        let conversationHistory = []; // Stores the chat history for Gemini API

        /**
         * Displays the passcode modal and disables main chat input/button.
         */
        const showPasscodeModal = () => {
            passcodeModal.classList.remove('hidden');
            passcodeInput.value = ''; // Clear any previous input
            passcodeMessage.textContent = ''; // Clear any previous error messages
            passcodeInput.focus(); // Focus on the input field for immediate typing
            userQuestionInput.disabled = true; // Disable chat input
            askButton.disabled = true; // Disable send button
        };

        /**
         * Hides the passcode modal and re-enables main chat input/button.
         */
        const hidePasscodeModal = () => {
            passcodeModal.classList.add('hidden');
            userQuestionInput.disabled = false; // Re-enable chat input
            askButton.disabled = false; // Re-enable send button
            userQuestionInput.focus(); // Focus back on the chat input
        };

        /**
         * Sends the entered passcode to the Netlify Function for verification.
         */
        const checkPasscode = async () => {
            const enteredPasscode = passcodeInput.value.trim();
            if (!enteredPasscode) {
                passcodeMessage.textContent = "Please enter a passcode.";
                return;
            }

            passcodeSubmitBtn.disabled = true; // Disable button to prevent multiple submissions
            passcodeMessage.textContent = "Verifying..."; // Show loading message

            try {
                // Make a POST request to the Netlify Function
                const response = await fetch('/.netlify/functions/verify-passcode', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ passcode: enteredPasscode }) // Send the entered passcode
                });

                const result = await response.json(); // Parse the JSON response

                if (response.ok && result.success) { // If status is 200 OK and success is true
                    isPasscodeVerified = true;
                    hidePasscodeModal();
                    appendMessage("Voice activated! You can now chat with Yazen.", 'ai'); 
                    voiceToggle.checked = true; // Ensure the toggle reflects the activated state
                } else {
                    // Passcode incorrect or other error from function
                    passcodeMessage.textContent = result.message || "Incorrect passcode. Please try again.";
                    passcodeInput.value = ''; // Clear input field
                    passcodeInput.focus(); // Refocus for new attempt
                    isPasscodeVerified = false;
                    voiceToggle.checked = false; // Keep voice toggle off
                    isVoiceEnabled = false; // Update state variable
                }
            } catch (error) {
                console.error("Error verifying passcode with Netlify Function:", error);
                passcodeMessage.textContent = "Verification failed due to a network error. Please try again.";
                isPasscodeVerified = false;
                voiceToggle.checked = false;
                isVoiceEnabled = false;
            } finally {
                passcodeSubmitBtn.disabled = false; // Re-enable submit button
            }
        };

        /**
         * Handles sending user questions to the Gemini AI.
         */
        const handleGeminiRequest = async () => {
            const userQuestion = userQuestionInput.value.trim();
            if (!userQuestion) return; // Do nothing if input is empty

            appendMessage(userQuestion, 'user'); // Display user's message in chat log
            conversationHistory.push({ role: "user", parts: [{ text: userQuestion }] }); // Add to history

            askButton.disabled = true; // Disable input/send during AI processing
            userQuestionInput.value = ''; // Clear input field
            thinkingIndicator.style.display = 'flex'; // Show AI thinking indicator
            stopSpeech(); // Stop any currently playing audio

            const apiUrl = `/.netlify/functions/gemini`; // Endpoint for Gemini API Netlify Function

            try {
                const response = await fetch(apiUrl, { 
                    method: 'POST', 
                    headers: { 'Content-Type': 'application/json' }, 
                    body: JSON.stringify({ history: conversationHistory }) // Send conversation history
                });
                if (!response.ok) { // Check for HTTP errors
                    const errorDetails = await response.text();
                    throw new Error(`API error: ${response.status} ${response.statusText}. Details: ${errorDetails}`); 
                }

                const result = await response.json(); // Parse AI response
                const aiText = result.text || "I'm sorry, I couldn't process that request. Please try again.";
                
                appendMessage(aiText, 'ai'); // Display AI's response
                conversationHistory.push({ role: "model", parts: [{ text: aiText }] }); // Add AI response to history
                
                // Only speak if voice is enabled AND passcode is verified
                if (isVoiceEnabled && isPasscodeVerified) {
                    const isArabic = /[\u0600-\u06FF]/.test(aiText); // Check if text is Arabic
                    const voiceId = isArabic ? CONFIG.ELEVENLABS_VOICE_ID_AR : CONFIG.ELEVENLABS_VOICE_ID_EN;
                    speakWithElevenLabs(aiText, voiceId); // Initiate text-to-speech
                }

            } catch (error) {
                console.error('Gemini function request failed:', error);
                appendMessage('An error occurred with the AI. Please check the function logs on Netlify.', 'ai-error');
            } finally {
                thinkingIndicator.style.display = 'none'; // Hide thinking indicator
                askButton.disabled = false; // Re-enable input/send
                userQuestionInput.focus(); // Return focus to input
            }
        };
        
        /**
         * Uses ElevenLabs API via a Netlify Function to convert text to speech.
         * @param {string} text - The text to be spoken.
         * @param {string} voiceId - The ElevenLabs voice ID to use.
         */
        const speakWithElevenLabs = async (text, voiceId) => {
            const apiUrl = `/.netlify/functions/elevenlabs`; // Endpoint for ElevenLabs Netlify Function

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ text, voiceId }) // Send text and voice ID
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`ElevenLabs Error: ${response.status} ${response.statusText}. Details: ${errorText}`);
                }
                
                const audioBlob = await response.blob(); // Get audio as a Blob
                const audioUrl = URL.createObjectURL(audioBlob); // Create a URL for the audio Blob
                currentAudio = new Audio(audioUrl); // Create a new Audio object
                
                const playPromise = currentAudio.play(); // Attempt to play audio
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        mouth.classList.add('talking'); // Animate mouth
                        stopSpeechBtn.style.display = 'inline-block'; // Show stop button
                        currentAudio.onended = stopSpeech; // Stop animation when audio ends
                    }).catch(error => {
                        // Handle cases where audio playback is blocked (e.g., by browser policies)
                        if (error.name === "NotAllowedError") {
                            appendMessage("Browser blocked audio. Please click the page to grant permission.", "ai-error");
                        } else {
                            console.error("Audio playback error:", error);
                        }
                        stopSpeech(); // Ensure mouth animation and stop button reset
                    });
                }

            } catch (error) {
                console.error("ElevenLabs function request failed:", error);
                appendMessage(error.message, "ai-error");
            }
        };

        /**
         * Stops any currently playing audio and resets the UI.
         */
        const stopSpeech = () => {
            if (currentAudio) {
                currentAudio.pause(); // Pause audio
                currentAudio.src = ''; // Clear audio source
                currentAudio = null; // Clear audio object
            }
            if ('speechSynthesis' in window) window.speechSynthesis.cancel(); // Cancel browser's speech synthesis if active
            mouth.classList.remove('talking'); // Stop mouth animation
            stopSpeechBtn.style.display = 'none'; // Hide stop button
        };
        
        /**
         * Appends a new message to the chat log.
         * @param {string} message - The message text.
         * @param {string} sender - 'user', 'ai', or 'ai-error'.
         */
        const appendMessage = (message, sender) => {
            const messageDiv = document.createElement('div');
            // Align messages based on sender
            messageDiv.className = 'flex items-start gap-3' + (sender === 'user' ? ' justify-end' : '');
            
            let iconClass = 'fa-solid text-xl pt-1 ';
            let textBg;

            if (sender === 'user') {
                iconClass += 'fa-user text-gray-400';
                textBg = 'bg-amber-600';
            } else if (sender === 'ai-error') {
                iconClass += 'fa-triangle-exclamation text-red-500';
                textBg = 'bg-red-900/50';
            } else { // sender === 'ai'
                iconClass += 'fa-robot text-amber-400';
                textBg = 'bg-gray-800';
            }
            
            const textP = document.createElement('p');
            textP.className = `${textBg} rounded-lg p-3 max-w-md`;
            textP.textContent = message;
            // Set text direction to Right-to-Left for Arabic messages
            if (/[\u0600-\u06FF]/.test(message)) textP.dir = 'rtl';

            const iconI = document.createElement('i');
            iconI.className = iconClass;

            // Order icon and text based on sender for alignment
            if (sender === 'user') {
                messageDiv.appendChild(textP);
                messageDiv.appendChild(iconI);
            } else {
                messageDiv.appendChild(iconI);
                messageDiv.appendChild(textP);
            }

            chatLog.appendChild(messageDiv);
            chatLog.scrollTop = chatLog.scrollHeight; // Scroll to bottom
        };

        // --- Event Listeners ---

        // Chat input and send button
        askButton.addEventListener('click', () => handleGeminiRequest());
        userQuestionInput.addEventListener('keydown', (e) => { 
            if (e.key === 'Enter') handleGeminiRequest(); 
        });
        stopSpeechBtn.addEventListener('click', stopSpeech);
        returnBtn.addEventListener('click', () => window.history.back());

        // Passcode modal interaction
        passcodeSubmitBtn.addEventListener('click', checkPasscode);
        passcodeInput.addEventListener('keydown', (e) => { 
            if (e.key === 'Enter') checkPasscode(); 
        });
        passcodeCancelBtn.addEventListener('click', () => {
            hidePasscodeModal();
            voiceToggle.checked = false; // Turn off voice toggle if user cancels
            isVoiceEnabled = false; // Also update the state variable
        });

        // Voice toggle switch logic
        voiceToggle.addEventListener('change', () => {
            isVoiceEnabled = voiceToggle.checked;
            if (isVoiceEnabled) {
                // If voice is turned on and passcode not yet verified, show modal
                if (!isPasscodeVerified) {
                    showPasscodeModal();
                }
            } else {
                // If voice is turned off, reset verification status and hide modal
                hidePasscodeModal(); // Ensure modal is hidden if voice is turned off manually
                isPasscodeVerified = false; // Reset verification
                stopSpeech(); // Also stop any ongoing speech if voice is disabled
            }
        });

        // Topic buttons (e.g., AI, Learning)
        document.querySelectorAll('.topic-btn').forEach(button => { 
            button.addEventListener('click', () => { 
                const topic = button.textContent.trim().substring(2); // Extract topic text
                userQuestionInput.value = `Tell me more about your work with ${topic}.`; 
                userQuestionInput.focus(); 
            }); 
        });

        // Guided prompt buttons (if any are added)
        document.querySelectorAll('.guided-btn').forEach(button => { 
            button.addEventListener('click', () => { 
                const prompt = button.textContent.replace(/"/g, ''); 
                userQuestionInput.value = `Let's try the "${prompt}" experience.`; 
                userQuestionInput.focus(); 
            }); 
        });
        
        // Initial welcome message when the page loads
        let welcomeMessage = "Hi, I‚Äôm Yazen's AI persona. Use the toggle to enable auto-play for my voice. What would you like to discuss?";
        appendMessage(welcomeMessage, 'ai');
        conversationHistory.push({ role: "model", parts: [{ text: welcomeMessage }] });
    });
    </script>
</body>
</html>
